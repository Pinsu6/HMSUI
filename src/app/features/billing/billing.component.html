<div class="billing">
  <!-- Page Header -->
  <div class="page-header">
    <div>
      <h1 class="page-title">Billing & Invoices</h1>
      <p class="page-subtitle">Manage invoices and track payments</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-secondary">
        <span>üì•</span> Export All
      </button>
      <button class="btn btn-primary">
        <span>‚ûï</span> Create Invoice
      </button>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-row">
    <div class="stat-card-mini revenue">
      <div class="stat-icon">üí∞</div>
      <div class="stat-content">
        <span class="stat-value">‚Çπ{{ stats.totalRevenue | number }}</span>
        <span class="stat-label">Total Revenue (Paid)</span>
      </div>
    </div>
    <div class="stat-card-mini pending">
      <div class="stat-icon">‚è≥</div>
      <div class="stat-content">
        <span class="stat-value">‚Çπ{{ stats.pending | number }}</span>
        <span class="stat-label">Pending Amount</span>
      </div>
    </div>
    <div class="stat-card-mini partial">
      <div class="stat-icon">üìä</div>
      <div class="stat-content">
        <span class="stat-value">‚Çπ{{ stats.partial | number }}</span>
        <span class="stat-label">Partial Payments</span>
      </div>
    </div>
    <div class="stat-card-mini count">
      <div class="stat-icon">üßæ</div>
      <div class="stat-content">
        <span class="stat-value">{{ stats.invoiceCount }}</span>
        <span class="stat-label">Total Invoices</span>
      </div>
    </div>
  </div>

  <!-- Filters -->
  <div class="controls-bar">
    <div class="search-box">
      <span class="search-icon">üîç</span>
      <input type="text" class="form-input" placeholder="Search by invoice number, guest, or room..."
        [(ngModel)]="searchQuery">
    </div>
    <div class="filter-tabs">
      <button class="filter-tab" [class.active]="statusFilter === 'all'" (click)="statusFilter = 'all'">All</button>
      <button class="filter-tab" [class.active]="statusFilter === 'paid'" (click)="statusFilter = 'paid'">Paid</button>
      <button class="filter-tab" [class.active]="statusFilter === 'partial'"
        (click)="statusFilter = 'partial'">Partial</button>
      <button class="filter-tab" [class.active]="statusFilter === 'pending'"
        (click)="statusFilter = 'pending'">Pending</button>
    </div>
  </div>

  <!-- Invoices Table -->
  <div class="card">
    <div class="table-container">
      <table class="table">
        <thead>
          <tr>
            <th>Invoice #</th>
            <th>Guest</th>
            <th>Room</th>
            <th>Stay Period</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Created</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let invoice of filteredInvoices">
            <td>
              <span class="invoice-number">{{ invoice.invoiceNumber }}</span>
            </td>
            <td>
              <span class="guest-name">{{ invoice.guestName }}</span>
            </td>
            <td>
              <span class="room-badge">{{ invoice.roomNumber }}</span>
            </td>
            <td>
              <span class="date-range">
                {{ invoice.checkInDate | date:'shortDate' }} - {{ invoice.checkOutDate | date:'shortDate' }}
              </span>
            </td>
            <td>
              <span class="amount">‚Çπ{{ (invoice.grandTotal || invoice.netAmount) | number }}</span>
            </td>
            <td>
              <span class="status-badge" [ngClass]="(invoice.paymentStatus || invoice.status || 'Paid').toLowerCase()">
                {{ (invoice.paymentStatus || invoice.status || 'Paid') | titlecase }}
              </span>
            </td>
            <td>
              <span class="created-date">{{ (invoice.createdOn || invoice.createdAt) | date:'medium' }}</span>
            </td>
            <td>
              <div class="action-buttons">
                <button class="btn btn-icon btn-ghost" title="View" (click)="viewInvoice(invoice)">üëÅÔ∏è</button>
                <button class="btn btn-icon btn-ghost" title="Download" (click)="downloadInvoice(invoice)">üì•</button>
                <button class="btn btn-icon btn-ghost" title="Print" (click)="printInvoice(invoice)">üñ®Ô∏è</button>
                <!-- <button class="btn btn-icon btn-ghost" title="Share" (click)="sendInvoice(invoice)">üì§</button> -->
              </div>
            </td>
          </tr>
          <tr *ngIf="filteredInvoices.length === 0">
            <td colspan="8" class="text-center">No invoices found.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Invoice Preview (Sample) -->
  <div class="invoice-preview-section">
    <h2 class="section-title">üìÑ Invoice Template Preview</h2>
    <div class="invoice-preview">
      <div class="invoice-header">
        <div class="hotel-info">
          <h2>üè® Hotel Management System</h2>
          <p>123 Hotel Street, City, State - 123456</p>
          <p>Phone: +91 12345 67890 | Email: info@hotel.com</p>
          <p>GSTIN: 12ABCDE3456F7Z8</p>
        </div>
        <div class="invoice-info">
          <h3>TAX INVOICE</h3>
          <p><strong>Invoice #:</strong> INV-2025-001</p>
          <p><strong>Date:</strong> December 5, 2025</p>
        </div>
      </div>

      <div class="invoice-details">
        <div class="guest-details">
          <h4>Bill To:</h4>
          <p><strong>John Doe</strong></p>
          <p>123 Guest Address</p>
          <p>Mumbai, Maharashtra</p>
        </div>
        <div class="stay-details">
          <h4>Stay Details:</h4>
          <p><strong>Room:</strong> 201 (Standard)</p>
          <p><strong>Check-In:</strong> Dec 1, 2025</p>
          <p><strong>Check-Out:</strong> Dec 4, 2025</p>
        </div>
      </div>

      <table class="invoice-table">
        <thead>
          <tr>
            <th>Description</th>
            <th>Qty</th>
            <th>Rate</th>
            <th>Amount</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Room Charges (Standard Room)</td>
            <td>3 Nights</td>
            <td>‚Çπ2,500</td>
            <td>‚Çπ7,500</td>
          </tr>
          <tr>
            <td>Room Service - Dinner</td>
            <td>1</td>
            <td>‚Çπ1,200</td>
            <td>‚Çπ1,200</td>
          </tr>
          <tr>
            <td>Laundry Service</td>
            <td>5 Items</td>
            <td>‚Çπ70</td>
            <td>‚Çπ350</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="3">Subtotal</td>
            <td>‚Çπ9,050</td>
          </tr>
          <tr>
            <td colspan="3">CGST (9%)</td>
            <td>‚Çπ815</td>
          </tr>
          <tr>
            <td colspan="3">SGST (9%)</td>
            <td>‚Çπ815</td>
          </tr>
          <tr class="total-row">
            <td colspan="3"><strong>Total</strong></td>
            <td><strong>‚Çπ10,680</strong></td>
          </tr>
        </tfoot>
      </table>

      <div class="invoice-footer">
        <p>Thank you for staying with us!</p>
        <p class="small">This is a computer-generated invoice. No signature required.</p>
      </div>
    </div>
  </div>
</div>