<div class="billing">
  <!-- Page Header -->
  <div class="page-header">
    <div>
      <h1 class="page-title">Billing & Invoices</h1>
      <p class="page-subtitle">Manage invoices and track payments</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-secondary">
        <span>ğŸ“¥</span> Export All
      </button>
      <button class="btn btn-primary">
        <span>â•</span> Create Invoice
      </button>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-row">
    <div class="stat-card-mini revenue">
      <div class="stat-icon">ğŸ’°</div>
      <div class="stat-content">
        <span class="stat-value">â‚¹{{ stats.totalRevenue | number }}</span>
        <span class="stat-label">Total Revenue (Paid)</span>
      </div>
    </div>
    <div class="stat-card-mini pending">
      <div class="stat-icon">â³</div>
      <div class="stat-content">
        <span class="stat-value">â‚¹{{ stats.pending | number }}</span>
        <span class="stat-label">Pending Amount</span>
      </div>
    </div>
    <div class="stat-card-mini partial">
      <div class="stat-icon">ğŸ“Š</div>
      <div class="stat-content">
        <span class="stat-value">â‚¹{{ stats.partial | number }}</span>
        <span class="stat-label">Partial Payments</span>
      </div>
    </div>
    <div class="stat-card-mini count">
      <div class="stat-icon">ğŸ§¾</div>
      <div class="stat-content">
        <span class="stat-value">{{ stats.invoiceCount }}</span>
        <span class="stat-label">Total Invoices</span>
      </div>
    </div>
  </div>

  <!-- Filters -->
  <div class="controls-bar">
    <div class="search-box">
      <span class="search-icon">ğŸ”</span>
      <input type="text" class="form-input" placeholder="Search by invoice number, guest, or room..."
        [(ngModel)]="searchQuery">
    </div>
    <div class="filter-tabs">
      <button class="filter-tab" [class.active]="statusFilter === 'all'" (click)="statusFilter = 'all'">All</button>
      <button class="filter-tab" [class.active]="statusFilter === 'paid'" (click)="statusFilter = 'paid'">Paid</button>
      <button class="filter-tab" [class.active]="statusFilter === 'partial'"
        (click)="statusFilter = 'partial'">Partial</button>
      <button class="filter-tab" [class.active]="statusFilter === 'pending'"
        (click)="statusFilter = 'pending'">Pending</button>
    </div>
  </div>

  <!-- Invoices Table -->
  <div class="card">
    <div class="table-container">
      <table class="table">
        <thead>
          <tr>
            <th>Invoice #</th>
            <th>Guest</th>
            <th>Room</th>
            <th>Stay Period</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Created</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let invoice of filteredInvoices">
            <td>
              <span class="invoice-number">{{ invoice.invoiceNumber }}</span>
            </td>
            <td>
              <span class="guest-name">{{ invoice.guestName }}</span>
            </td>
            <td>
              <span class="room-badge">{{ invoice.roomNumber }}</span>
            </td>
            <td>
              <span class="date-range">
                {{ invoice.checkInDate | date:'shortDate' }} - {{ invoice.checkOutDate | date:'shortDate' }}
              </span>
            </td>
            <td>
              <span class="amount">â‚¹{{ (invoice.grandTotal || invoice.netAmount) | number }}</span>
            </td>
            <td>
              <span class="status-badge" [ngClass]="(invoice.paymentStatus || invoice.status || 'Paid').toLowerCase()">
                {{ (invoice.paymentStatus || invoice.status || 'Paid') | titlecase }}
              </span>
            </td>
            <td>
              <span class="created-date">{{ (invoice.createdOn || invoice.createdAt) | date:'medium' }}</span>
            </td>
            <td>
              <div class="action-buttons">
                <button class="btn btn-icon btn-ghost" title="View" (click)="viewInvoice(invoice)">ğŸ‘ï¸</button>
                <button class="btn btn-icon btn-ghost" title="Download" (click)="downloadInvoice(invoice)">ğŸ“¥</button>
                <button class="btn btn-icon btn-ghost" title="Print" (click)="printInvoice(invoice)">ğŸ–¨ï¸</button>
                <!-- <button class="btn btn-icon btn-ghost" title="Share" (click)="sendInvoice(invoice)">ğŸ“¤</button> -->
              </div>
            </td>
          </tr>
          <tr *ngIf="filteredInvoices.length === 0">
            <td colspan="8" class="text-center">No invoices found.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>


</div>